# 마이크로 프론트엔드에서의 도메인 분해

## 도메인 주도 설계(Domain Driven Design)

도메인 관심사를 작게 분리하여 독립적으로 개발 및 배포할 수 있는 방법을 제시(이하 DDD)

DDD에서 마이크로 프론트엔드에 적용할 수 있는 두가지 주요 개념은

- 명확한 경계를 가진 마이크로 프런트엔드 정의
- 경계를 설정하기 위한 전략 수립

이다.

### 👉🏻 DDD 개념

위 개념을 적용하기 위해 DDD 개념 중 모듈, 바운디드 콘텍스트, 콘텍스트 맵을 이야기해보자.

1. 모듈

   - 어플리케이션에서 특정한 기능 모음을 위한 컨테이너 역할로 하나의 모듈은 하나의 마이크로 프론트앤드에 빗대서 표현할 수 있다.
   - ex) 장바구니 기능, 결제하기 기능

2. 바운디드 콘텍스트

   - 모듈을 분류할 수 있도록 하기 위한 개념으로 여러 모듈을 포함하고 있으며, 모듈들을 논리적으로 묶어주는 범위를 말한다.
   - ex) 주문

3. 콘텍스트 맵

   - 바운디드 콘텍스트간의 관계와 연결을 시각화 해 놓은 도구이다.

4. 자기 완비적 도메인 설계와 종류
   - 시스템을 각각 돕릭적이면서도 상호작용 가능하도록 설계하여 하나의 논리적 시스템처럼 동작하도록 하는 아키텍쳐 접근 방식
   - 전략적 설계: 도메인들을 식별하고 서로의 연결에 중점을 두는 설계 방식으로 전체적인 시스템의 협동을 고려할 때 유용하다.
   - 전술적 설계: 메인들을 구조화하는 것에 초점을 맞추는 설계 방식으로 도메인을 세분화할 때 유용하다.

## 관심사 분리

### 👉🏻 기술적 분할

화면이나 UI 요소를 기반으로 그룹화한다.

- 장점: 화면이나 UI 요소마다 독립적으로 개발하고 배포가 가능해 빠른 개발이 가능하다.
- 단점: 각 마이크로 프런트앤드간의 완벽한 독립이 어렵다.

### 👉🏻 기능적 분할

기능을 기반으로 그룹화한다.

- 장점: 독립적인 운영이 가능하여 새로운 마이크로 프론트앤드가 추가되는 경우 다른 마이크로 프론트앤드를 변경할 필요가 없다.
- 단점: 하나의 화면은 어떤 단일 마이크로 프런트엔드에도 포함될 수 없어 소스간의 연결이 어렵다. 또한 모든 것들이 확장성을 고려하여 만들어져야 하기 때문에 추상적이고 구현이 어렵다.

## 아키텍처 경계

아키텍쳐를 설계할 때 고려해야 할 것들을 알아보자.

1. 핵심 적인 기능만을 공유하여 관리하거나, 공유를 하되 각각의 마이크로 프론트엔드에서 재정의하여 사용 가능하도록 구성한다.
2. 보안/성능/팀구성을 고려하여 적절한 자유도를 선택하자.
3. DOM에 접근을 제한하여 보안을 신경쓴다. 가장 간단한 솔루션은 `<iframe>`를 사용한 `sandbox` 속성 설정이다.
4. 요구사항을 기반으로 적절한 균형을 찾아 마이크로 프런트앤드의 범용성(≈재사용성)을 갖추어야 한다.

## 생각 정리와 이야기 거리

- 결국 가장 순수한 마이크로 프론트앤드에 근접하기 위해서는 재사용성이 잘 고려되어야 한다는 것을 알게 됐다.
- 내가 떠올린 보편적인 마이크로 프론트앤드는 기술적 분할에 가까웠는데 `낮은 결합도 높은 응집력`이 기반인 마이크로 프론트엔드가 지향하는 점에서는 기능적 분할이 더 가깝다고 느꼈다.
- 갑작스런 횡단 관심사에 대한 이야기(p.60)가 나오는데 이 이야기가 나온 저의를 파악하기 어려웠다. 단지 마이크로 프론트엔드를 구성하는 방식의 다양성을 이야기 하고 싶은 것인가 ?
